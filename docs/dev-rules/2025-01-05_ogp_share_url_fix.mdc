# ğŸ”— OGPå…±æœ‰URLä¿®æ­£å®Ÿè£…ãƒ­ã‚°

## ğŸ“… å®Ÿè£…æ—¥
2025-01-05

## ğŸ¯ æ¦‚è¦
Twitterã‚·ã‚§ã‚¢ã§ã®OGPè¡¨ç¤ºã‚·ã‚¹ãƒ†ãƒ ã‚’æ”¹å–„ã€‚é€šå¸¸ã®ãƒšãƒ¼ã‚¸URLï¼ˆ`/battle-replay/xxx`ã€`/battle/xxx`ï¼‰ã§ã‚‚OGPãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ã‚·ã‚¹ãƒ†ãƒ ã‚’ä¿®æ­£ã€‚

## ğŸ” ç™ºè¦‹ã•ã‚ŒãŸå•é¡Œ
### å°‚ç”¨OGP URLã®ä½¿ç”¨ã«ã‚ˆã‚‹å•é¡Œ
- **ç¾åœ¨ã®ã‚·ã‚¹ãƒ†ãƒ **: ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ã§å°‚ç”¨ã®OGP URLï¼ˆ`/functions/v1/ogp-page?battle_id=xxx`ï¼‰ã‚’ä½¿ç”¨
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœŸå¾…**: é€šå¸¸ã®ãƒšãƒ¼ã‚¸URLï¼ˆ`/battle-replay/xxx`ï¼‰ã‚’ç›´æ¥ã‚·ã‚§ã‚¢ã—ã¦ã‚‚OGPãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨
- **å•é¡Œ**: é€šå¸¸ã®ãƒšãƒ¼ã‚¸URLã§ã¯OGPãŒè¡¨ç¤ºã•ã‚Œãªã„

## ğŸ“ å®Ÿè£…å†…å®¹

### âœ… ã‚·ã‚§ã‚¢URLä¿®æ­£
**ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«**: 
- `src/components/ui/ShareBattleButton.tsx`
- `src/components/battle/BattleView.tsx`
- `src/components/ui/BattleMatchedModal.tsx`

**å¤‰æ›´å†…å®¹**:
```typescript
// ä¿®æ­£å‰
const url = `${import.meta.env.VITE_SUPABASE_URL}/functions/v1/ogp-page?battle_id=${battleId}`;

// ä¿®æ­£å¾Œ
const url = `${window.location.origin}/battle-replay/${battleId}`;
// ã¾ãŸã¯
const url = `${window.location.origin}/battle/${battleId}`;
```

### âœ… ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰OGPãƒ¡ã‚¿ã‚¿ã‚°å¼·åŒ–
**ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/pages/BattleViewPage.tsx`
- `src/pages/BattleReplayPage.tsx`

**æ”¹å–„å†…å®¹**:
- å‹•çš„ãªãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«ç”Ÿæˆï¼ˆãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼åå«ã‚€ï¼‰
- è©³ç´°ãªèª¬æ˜æ–‡ç”Ÿæˆï¼ˆãƒãƒˆãƒ«æƒ…å ±å«ã‚€ï¼‰
- OGPç”»åƒURLæœ€é©åŒ–

## ğŸ”§ æŠ€è¡“è©³ç´°

### ã‚·ã‚§ã‚¢URLæˆ¦ç•¥ã®å¤‰æ›´
```typescript
// ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒãƒˆãƒ«
const url = `${window.location.origin}/battle/${battleId}`;

// ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ãƒãƒˆãƒ«
const url = `${window.location.origin}/battle-replay/${battleId}`;
```

### OGPãƒ¡ã‚¿ã‚¿ã‚°å‹•çš„ç”Ÿæˆ
```typescript
// å‹•çš„ã‚¿ã‚¤ãƒˆãƒ«
const pageTitle = battle ? 
  `${battle.contestant_a?.username || 'Player 1'} vs ${battle.contestant_b?.username || 'Player 2'} - BeatNexus Battle` : 
  'BeatNexus Battle';

// å‹•çš„èª¬æ˜æ–‡
const description = battle ?
  `Watch the epic beatbox battle between ${battle.contestant_a?.username || 'Player 1'} and ${battle.contestant_b?.username || 'Player 2'}! Vote for your favorite performer on BeatNexus.` :
  'Watch epic beatbox battles and vote for your favorite performers on BeatNexus.';

// OGPç”»åƒURL
const imageUrl = `${import.meta.env.VITE_SUPABASE_URL}/functions/v1/ogp-battle-card?battle_id=${id}`;
```

## ğŸ¯ è§£æ±ºã•ã‚ŒãŸå•é¡Œ
1. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“å‘ä¸Š**: é€šå¸¸ã®ãƒšãƒ¼ã‚¸URLã§ã®ã‚·ã‚§ã‚¢ãŒå¯èƒ½
2. **OGPè¡¨ç¤ºæ”¹å–„**: ã‚ˆã‚Šè©³ç´°ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã§SNSã§ã®è¡¨ç¤ºå“è³ªå‘ä¸Š
3. **URLçµ±ä¸€**: å°‚ç”¨OGP URLã¨é€šå¸¸URLã®åˆ†é›¢è§£æ¶ˆ
4. **ã‚·ã‚§ã‚¢æ©Ÿèƒ½æ”¹å–„**: è‡ªç„¶ãªURLã§ã®ã‚·ã‚§ã‚¢ä½“é¨“

## ğŸ“Š å½±éŸ¿ç¯„å›²
- **ã‚·ã‚§ã‚¢æ©Ÿèƒ½**: å…¨ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ã§ã®é€šå¸¸URLä½¿ç”¨
- **OGPãƒ¡ã‚¿ã‚¿ã‚°**: å‹•çš„ç”Ÿæˆã«ã‚ˆã‚‹è©³ç´°æƒ…å ±è¡¨ç¤º
- **SEO**: æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã§ã®è¡¨ç¤ºå“è³ªå‘ä¸Š
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“**: è‡ªç„¶ãªURLå…±æœ‰

## ğŸš€ ä»Šå¾Œã®æ”¹å–„æ¡ˆ

### SSRå¯¾å¿œæ¤œè¨
- Next.jsã‚„Nuxt.jsã§ã®SSRå®Ÿè£…
- SNSã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼å‘ã‘ã®ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°

### ãƒ—ãƒªãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å¯¾å¿œ
- é™çš„ã‚µã‚¤ãƒˆç”Ÿæˆã§ã®å¯¾å¿œ
- ãƒ“ãƒ«ãƒ‰æ™‚ã®ãƒ¡ã‚¿ã‚¿ã‚°ç”Ÿæˆ

## âœ… æ¤œè¨¼é …ç›®
- [x] ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ã§ã®é€šå¸¸URLä½¿ç”¨ç¢ºèª
- [x] OGPãƒ¡ã‚¿ã‚¿ã‚°å‹•çš„ç”Ÿæˆç¢ºèª
- [ ] Twitter Card Validatorã§ã®æ¤œè¨¼
- [ ] å®Ÿéš›ã®SNSã§ã®OGPè¡¨ç¤ºç¢ºèª
- [ ] å„ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®å‹•ä½œç¢ºèª

## ğŸ”— é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»æ©Ÿèƒ½
- `src/components/ui/ShareBattleButton.tsx` - ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- `src/components/battle/BattleView.tsx` - ãƒãƒˆãƒ«ãƒ“ãƒ¥ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- `src/components/ui/BattleMatchedModal.tsx` - ãƒãƒƒãƒãƒ³ã‚°ãƒ¢ãƒ¼ãƒ€ãƒ«
- `src/pages/BattleViewPage.tsx` - ãƒãƒˆãƒ«ãƒšãƒ¼ã‚¸
- `src/pages/BattleReplayPage.tsx` - ãƒªãƒ—ãƒ¬ã‚¤ãƒšãƒ¼ã‚¸
- `supabase/functions/ogp-battle-card/index.ts` - OGPç”»åƒç”Ÿæˆé–¢æ•°

## ğŸ”„ å¾“æ¥ã‚·ã‚¹ãƒ†ãƒ ã¨ã®æ¯”è¼ƒ
| é …ç›® | å¾“æ¥ã‚·ã‚¹ãƒ†ãƒ  | æ–°ã‚·ã‚¹ãƒ†ãƒ  | æ”¹å–„ç‚¹ |
|------|-------------|------------|--------|
| ã‚·ã‚§ã‚¢URL | å°‚ç”¨OGP URL | é€šå¸¸ãƒšãƒ¼ã‚¸URL | è‡ªç„¶ãªURL |
| OGPè¡¨ç¤º | å°‚ç”¨URLã®ã¿ | é€šå¸¸URLã§ã‚‚è¡¨ç¤º | åˆ©ä¾¿æ€§å‘ä¸Š |
| ãƒ¡ã‚¿ã‚¿ã‚° | é™çš„ | å‹•çš„ç”Ÿæˆ | è©³ç´°æƒ…å ± |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ | 2æ®µéšURL | 1æ®µéšURL | ã‚·ãƒ³ãƒ—ãƒ«åŒ– |

---
**å®Ÿè£…è€…**: AI Assistant  
**ãƒ¬ãƒ“ãƒ¥ãƒ¼**: è¦ãƒ¬ãƒ“ãƒ¥ãƒ¼  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: å®Ÿè£…å®Œäº†ã€SNSè¡¨ç¤ºæ¤œè¨¼å¾…ã¡
description:
globs:
alwaysApply: false
---
