---
description:
globs:
alwaysApply: false
---
# ğŸ“º ãƒãƒˆãƒ«ã‚³ãƒ¡ãƒ³ãƒˆåºƒå‘Šè¦–è´ãƒ­ãƒƒã‚¯æ©Ÿèƒ½å®Ÿè£…ãƒ­ã‚°

## ğŸ“… å®Ÿè£…æ—¥
2025-01-02

## ğŸ¯ æ¦‚è¦
ãƒãƒˆãƒ«è¦–è´ãƒšãƒ¼ã‚¸ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«åºƒå‘Šè¦–è´æ©Ÿèƒ½ã‚’è¿½åŠ ã€‚
ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã‚‹ã«ã¯åºƒå‘Šè¦–è´ï¼ˆç¾æ™‚ç‚¹ã§ã¯ç–‘ä¼¼è¦–è´ãƒœã‚¿ãƒ³ï¼‰ãŒå¿…è¦ãªæ©Ÿèƒ½ã‚’å®Ÿè£…ã€‚
æ—¢å­˜ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã¨ã¼ã‹ã—åŠ¹æœã‚’é©ç”¨ã—ã€é­…åŠ›çš„ãªUIã§åºƒå‘Šè¦–è´ã‚’ä¿ƒé€²ã€‚

## ğŸ” è¦ä»¶
- **æ–°ã—ã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆç¦æ­¢**: æ—¢å­˜ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç½®ãæ›ãˆãšã«æ©Ÿèƒ½è¿½åŠ 
- **ã‚‚ã‚„ãŒã‹ã‹ã£ãŸè¡¨ç¤º**: ã‚³ãƒ¡ãƒ³ãƒˆãŒè¦‹ãˆã‚‹ã‘ã©èª­ã‚ãªã„çŠ¶æ…‹ã®å®Ÿç¾
- **åºƒå‘Šè¦–è´ãƒœã‚¿ãƒ³**: ã‚¯ãƒªãƒƒã‚¯ã§ã‚³ãƒ¡ãƒ³ãƒˆãƒ­ãƒƒã‚¯è§£é™¤
- **ç–‘ä¼¼åºƒå‘Šã‚·ã‚¹ãƒ†ãƒ **: å®Ÿéš›ã®åºƒå‘Šãªã—ã€ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã®ã¿ã§è§£é™¤

## ğŸ“ å®Ÿè£…å†…å®¹

### âœ… ç¿»è¨³ã‚­ãƒ¼è¿½åŠ 
**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/i18n/locales/ja.json`, `src/i18n/locales/en.json`

#### æ—¥æœ¬èªã‚­ãƒ¼
```json
"watchAdToViewComments": "åºƒå‘Šã‚’è¦–è´ã—ã¦ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã‚‹",
"commentsLocked": "ã‚³ãƒ¡ãƒ³ãƒˆãŒãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ã¾ã™", 
"watchAdButton": "åºƒå‘Šã‚’è¦–è´",
"viewingAd": "åºƒå‘Šã‚’è¦–è´ä¸­...",
"commentsUnlocked": "ã‚³ãƒ¡ãƒ³ãƒˆãŒè¡¨ç¤ºã•ã‚Œã¾ã—ãŸï¼",
"adWatchingFeature": "åºƒå‘Šè¦–è´æ©Ÿèƒ½"
```

#### è‹±èªã‚­ãƒ¼
```json
"watchAdToViewComments": "Watch Ad to View Comments",
"commentsLocked": "Comments are locked",
"watchAdButton": "Watch Ad", 
"viewingAd": "Watching Ad...",
"commentsUnlocked": "Comments unlocked!",
"adWatchingFeature": "Ad Watching Feature"
```

### âœ… BattleView.tsxæ©Ÿèƒ½è¿½åŠ 
**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/components/battle/BattleView.tsx`

#### æ–°è¦ã‚¹ãƒ†ãƒ¼ãƒˆ
```typescript
// ğŸ†• åºƒå‘Šè¦–è´æ©Ÿèƒ½ã®ã‚¹ãƒ†ãƒ¼ãƒˆ
const [hasWatchedAd, setHasWatchedAd] = useState(false);
const [isWatchingAd, setIsWatchingAd] = useState(false);
```

#### åºƒå‘Šè¦–è´ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
```typescript
// ğŸ†• åºƒå‘Šè¦–è´ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
const handleWatchAd = async () => {
  setIsWatchingAd(true);
  try {
    // 2ç§’é–“ã®ç–‘ä¼¼åºƒå‘Šè¦–è´æ™‚é–“
    await new Promise(resolve => setTimeout(resolve, 2000));
    setHasWatchedAd(true);
    // ãƒˆãƒ¼ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãªã©ã§æˆåŠŸã‚’çŸ¥ã‚‰ã›ã‚‹å ´åˆã¯ã“ã“ã«è¿½åŠ 
  } catch (error) {
    console.error('âŒ Ad watching failed:', error);
  } finally {
    setIsWatchingAd(false);
  }
};
```

### âœ… ã‚³ãƒ¡ãƒ³ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³UIæ”¹ä¿®
#### ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã‚·ã‚¹ãƒ†ãƒ 
- **æ¡ä»¶è¡¨ç¤º**: `{!hasWatchedAd && (...)}`ã§åºƒå‘Šæœªè¦–è´æ™‚ã®ã¿è¡¨ç¤º
- **ãƒ‡ã‚¶ã‚¤ãƒ³**: åŠé€æ˜é»’èƒŒæ™¯ + ãƒ–ãƒ©ãƒ¼ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ + ä¸­å¤®é…ç½®ãƒ¢ãƒ¼ãƒ€ãƒ«
- **ã‚¢ã‚¤ã‚³ãƒ³**: ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å††å½¢èƒŒæ™¯ã«Playã‚¢ã‚¤ã‚³ãƒ³
- **ãƒœã‚¿ãƒ³**: ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ + ãƒ›ãƒãƒ¼ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ + ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹

#### ã¼ã‹ã—åŠ¹æœ
- **é©ç”¨æ¡ä»¶**: `className={!hasWatchedAd ? 'blur-sm pointer-events-none' : ''}`
- **åŠ¹æœ**: ã‚³ãƒ¡ãƒ³ãƒˆãŒè¦‹ãˆã‚‹ã‘ã©èª­ã‚ãªã„çŠ¶æ…‹ã‚’å®Ÿç¾
- **ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³**: åºƒå‘Šæœªè¦–è´æ™‚ã¯ã‚¯ãƒªãƒƒã‚¯ç„¡åŠ¹åŒ–

## ğŸ”§ æŠ€è¡“è©³ç´°

### ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 
- **ã‚«ãƒ©ãƒ¼ã‚¹ã‚­ãƒ¼ãƒ **: BeatNexusã®æ—¢å­˜ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆcyan-pink ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ã«çµ±ä¸€
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–**: ãƒ¢ãƒã‚¤ãƒ«ãƒ»PCå¯¾å¿œ
- **ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³**: ãƒ›ãƒãƒ¼ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã€ã‚¹ã‚±ãƒ¼ãƒ«ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ã€ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ãƒ”ãƒŠãƒ¼

### çŠ¶æ…‹ç®¡ç†
- **ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒ†ãƒ¼ãƒˆ**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§ã‚·ãƒ³ãƒ—ãƒ«ã«ç®¡ç†
- **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç¶­æŒ**: ãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰æ™‚ã¯ãƒªã‚»ãƒƒãƒˆï¼ˆå°†æ¥çš„ã«ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å¯¾å¿œå¯èƒ½ï¼‰
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: try-catchæ§‹æ–‡ã§å®‰å…¨ãªå‡¦ç†

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- **æ¡ä»¶ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°**: å¿…è¦ãªè¦ç´ ã®ã¿è¡¨ç¤º
- **é…å»¶ãªã—**: 2ç§’é–“ã®ç–‘ä¼¼åºƒå‘Šã§é«˜é€Ÿä½“é¨“
- **ãƒ¡ãƒ¢ãƒªåŠ¹ç‡**: è¿½åŠ ã®å¤§ããªãƒªã‚½ãƒ¼ã‚¹èª­ã¿è¾¼ã¿ãªã—

## ğŸ¯ è§£æ±ºã•ã‚ŒãŸå•é¡Œ
1. **åç›ŠåŒ–æº–å‚™**: å°†æ¥ã®åºƒå‘Šã‚·ã‚¹ãƒ†ãƒ å°å…¥ã®åœŸå°æ§‹ç¯‰
2. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆ**: ã‚³ãƒ¡ãƒ³ãƒˆé–²è¦§ã®ãŸã‚ã®èƒ½å‹•çš„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
3. **ãƒ‡ã‚¶ã‚¤ãƒ³ä¸€è²«æ€§**: æ—¢å­˜UIã‚’ç ´å£Šã›ãšã«æ©Ÿèƒ½è¿½åŠ 
4. **å›½éš›åŒ–å¯¾å¿œ**: æ—¥è‹±ä¸¡è¨€èªã§ã®å®Œå…¨ã‚µãƒãƒ¼ãƒˆ

## ğŸ“Š å½±éŸ¿ç¯„å›²
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: BattleViewã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã¿
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“**: ã‚³ãƒ¡ãƒ³ãƒˆé–²è¦§ã«1ã‚¹ãƒ†ãƒƒãƒ—è¿½åŠ 
- **ãƒ‡ã‚¶ã‚¤ãƒ³**: æ—¢å­˜ã‚¹ã‚¿ã‚¤ãƒ«ã¨ã®å®Œå…¨çµ±ä¸€
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: è»½å¾®ãªå½±éŸ¿ï¼ˆã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤è¦ç´ è¿½åŠ ï¼‰

## ğŸš€ ä»Šå¾Œã®æ‹¡å¼µå¯èƒ½æ€§

### å®Ÿéš›ã®åºƒå‘Šã‚·ã‚¹ãƒ†ãƒ çµ±åˆ
```typescript
// å°†æ¥çš„ãªå®Ÿè£…ä¾‹
const handleWatchAd = async () => {
  setIsWatchingAd(true);
  try {
    // Google AdSense, Unity Adsç­‰ã®SDKå‘¼ã³å‡ºã—
    await showInterstitialAd();
    setHasWatchedAd(true);
  } catch (error) {
    // åºƒå‘Šèª­ã¿è¾¼ã¿å¤±æ•—æ™‚ã®å‡¦ç†
    console.error('Ad failed to load:', error);
  } finally {
    setIsWatchingAd(false);
  }
};
```

### ã‚»ãƒƒã‚·ãƒ§ãƒ³æ°¸ç¶šåŒ–
- ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã§ã®è¦–è´çŠ¶æ…‹ä¿å­˜
- ãƒãƒˆãƒ«ã”ã¨ã®å€‹åˆ¥ç®¡ç†
- æœ‰åŠ¹æœŸé™ä»˜ããƒ­ãƒƒã‚¯è§£é™¤

### åˆ†æãƒ»åç›Šè¿½è·¡
- åºƒå‘Šè¦–è´ç‡ã®åˆ†æ
- ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç‡æ¸¬å®š
- åç›Šãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ

## âœ… æ¤œè¨¼é …ç›®
- [x] ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤æ­£å¸¸è¡¨ç¤º
- [x] ã¼ã‹ã—åŠ¹æœæ­£å¸¸å‹•ä½œ  
- [x] åºƒå‘Šè¦–è´ãƒœã‚¿ãƒ³æ©Ÿèƒ½
- [x] ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹è¡¨ç¤º
- [x] ã‚³ãƒ¡ãƒ³ãƒˆè¡¨ç¤ºè§£é™¤
- [x] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³å¯¾å¿œ
- [x] å¤šè¨€èªç¿»è¨³æ­£å¸¸å‹•ä½œ
- [ ] å®Ÿæ©Ÿã§ã®å‹•ä½œç¢ºèª
- [ ] è¤‡æ•°ãƒãƒˆãƒ«ã§ã®å‹•ä½œç¢ºèª

## ğŸ”— é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«
- `src/components/battle/BattleView.tsx` - ãƒ¡ã‚¤ãƒ³å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«
- `src/i18n/locales/ja.json` - æ—¥æœ¬èªç¿»è¨³è¿½åŠ 
- `src/i18n/locales/en.json` - è‹±èªç¿»è¨³è¿½åŠ 

## ğŸ¨ UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹é€ 
```
Community Reactions
â”œâ”€â”€ Header (ã‚¢ã‚¤ã‚³ãƒ³ + ã‚¿ã‚¤ãƒˆãƒ« + ã‚³ãƒ¡ãƒ³ãƒˆæ•°)
â”œâ”€â”€ Comments Container (relative)
â”‚   â”œâ”€â”€ Overlay (hasWatchedAd=falseæ™‚)
â”‚   â”‚   â”œâ”€â”€ Backdrop (black/60 + blur)
â”‚   â”‚   â””â”€â”€ Modal Card
â”‚   â”‚       â”œâ”€â”€ Play Icon (gradient circle)
â”‚   â”‚       â”œâ”€â”€ Title & Description
â”‚   â”‚       â””â”€â”€ Watch Ad Button
â”‚   â””â”€â”€ Comments Content (bluråŠ¹æœ)
â”‚       â”œâ”€â”€ Loading State
â”‚       â”œâ”€â”€ Comments List  
â”‚       â””â”€â”€ No Comments State
```

---
**å®Ÿè£…è€…**: AI Assistant  
**ãƒ¬ãƒ“ãƒ¥ãƒ¼**: è¦ãƒ¬ãƒ“ãƒ¥ãƒ¼  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: å®Ÿè£…å®Œäº†ã€å‹•ä½œç¢ºèªå¾…ã¡
